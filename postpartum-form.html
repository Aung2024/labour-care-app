<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Postpartum Care Form - Maternal & Child Health Care System</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="js/firebase.js"></script>
  <script src="js/status-manager.js"></script>
  <style>
    :root {
      --primary-color: #7c3aed;
      --secondary-color: #6d28d9;
      --accent-color: #a78bfa;
      --light-bg: #faf5ff;
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    body {
      background: var(--light-bg);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .header-section {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 2rem 0;
      margin-bottom: 2rem;
    }

    .form-container {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--card-shadow);
      margin-bottom: 2rem;
    }

    .form-section {
      margin-bottom: 2rem;
      padding: 1.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      background: #fafafa;
    }

    .form-section h4 {
      color: var(--primary-color);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .danger-signs-section {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .danger-signs-section h4 {
      color: #dc2626;
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .form-check {
      background: white;
      padding: 0.75rem;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      transition: all 0.2s ease;
    }

    .form-check:hover {
      background: #f8fafc;
      border-color: var(--primary-color);
    }

    .form-check-input:checked + .form-check-label {
      color: var(--primary-color);
      font-weight: 600;
    }

    .btn-primary-action {
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      border: none;
      color: white;
      font-weight: 600;
      padding: 0.75rem 2rem;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .btn-primary-action:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
      color: white;
    }

    .btn-secondary-action {
      background: #6b7280;
      border: none;
      color: white;
      font-weight: 600;
      padding: 0.75rem 2rem;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .btn-secondary-action:hover {
      background: #4b5563;
      color: white;
    }

    .patient-info {
      background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
      border: 1px solid #0ea5e9;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1.5rem;
    }

    .patient-info h5 {
      color: #0369a1;
      margin-bottom: 0.5rem;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.25rem;
    }

    .info-label {
      font-weight: 600;
      color: #374151;
    }

    .info-value {
      color: #6b7280;
    }

    .loading-spinner {
      text-align: center;
      padding: 3rem;
      color: var(--primary-color);
    }

    /* Language Switcher */
    .language-switcher {
      display: flex;
      gap: 0.25rem;
      align-items: center;
    }

    .language-btn {
      padding: 0.375rem 0.75rem;
      font-size: 0.875rem;
      border-radius: 8px;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.25rem;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
    }

    .language-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .language-btn.active {
      background: rgba(255, 255, 255, 0.4);
      border-color: rgba(255, 255, 255, 0.6);
      font-weight: 600;
    }

    .flag-icon {
      font-size: 1rem;
    }

    .yes-no-group {
      display: flex;
      gap: 1rem;
    }

    .yes-no-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    @media (max-width: 768px) {
      .header-section {
        padding: 1.5rem 0;
      }
      
      .form-container {
        padding: 1rem;
        margin: 0 1rem 1rem;
      }
      
      .checkbox-group {
        grid-template-columns: 1fr;
      }

      .header-section .d-flex {
        flex-wrap: wrap;
        gap: 0.5rem !important;
        justify-content: flex-start !important;
      }

      .header-section .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.8rem;
        white-space: nowrap;
      }

      .language-switcher {
        order: 1;
      }

      .header-section .btn-outline-light {
        order: 2;
        flex: 0 0 auto;
      }
    }

    @media (max-width: 576px) {
      .header-section h1 {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
      }

      .language-btn {
        padding: 0.3rem 0.5rem !important;
        font-size: 0.7rem !important;
      }

      .flag-icon {
        font-size: 0.875rem;
      }
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <div class="header-section">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="mb-2">
            <i class="fas fa-hands-holding-child me-3"></i>
            <span class="lang-text" data-en="Postpartum Care Form" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫ ·Äï·Äº·ÄØ·ÄÖ·ÄØ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äõ·Äæ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·ÄØ·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Postpartum Care Form</span>
          </h1>
          <p class="mb-0 opacity-75 lang-text" data-en="Record postpartum visit and health monitoring data" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫ ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äõ·Äæ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·ÄØ·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Äõ·Ä¨ ·Äû·Äê·ÄÑ·Ä∫·Ä∏·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫ ·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·Äê·ÄÑ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">
            Record postpartum visit and health monitoring data
          </p>
        </div>
        <div class="col-md-4 text-md-end">
          <div class="d-flex align-items-center justify-content-end gap-3">
            <!-- Language Switcher -->
            <div class="language-switcher">
              <button type="button" class="btn btn-sm language-btn active" data-lang="en" title="English">
                <span class="flag-icon">üá¨üáß</span> ENG
              </button>
              <button type="button" class="btn btn-sm language-btn" data-lang="my" title="·Äô·Äº·Äî·Ä∫·Äô·Ä¨">
                <span class="flag-icon">üá≤üá≤</span> MM
              </button>
            </div>
            <a href="postpartum-care.html" class="btn btn-outline-light btn-sm">
              <i class="fas fa-arrow-left me-2"></i><span class="lang-text" data-en="Back to Postpartum Care" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫ ·Äï·Äº·ÄØ·ÄÖ·ÄØ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äõ·Äæ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·ÄØ·Äû·Ä≠·ÄØ·Ä∑ ·Äï·Äº·Äî·Ä∫·Äû·ÄΩ·Ä¨·Ä∏·Äõ·Äî·Ä∫">Back to Postpartum Care</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Patient Information -->
    <div class="patient-info" id="patientInfo">
      <h5><i class="fas fa-user me-2"></i><span class="lang-text" data-en="Patient Information" data-my="·Äú·Ä∞·Äî·Ä¨ ·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫">Patient Information</span></h5>
      <div class="info-row">
        <span class="info-label lang-text" data-en="Name:" data-my="·Ä°·Äô·Ää·Ä∫:">Name:</span>
        <span class="info-value" id="patientName">Loading...</span>
      </div>
      <div class="info-row">
        <span class="info-label lang-text" data-en="Age:" data-my="·Ä°·Äû·ÄÄ·Ä∫:">Age:</span>
        <span class="info-value" id="patientAge">Loading...</span>
      </div>
      <div class="info-row">
        <span class="info-label lang-text" data-en="Phone:" data-my="·Äñ·ÄØ·Äî·Ä∫·Ä∏:">Phone:</span>
        <span class="info-value" id="patientPhone">Loading...</span>
      </div>
      <div class="info-row">
        <span class="info-label lang-text" data-en="Delivery Date:" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äñ·ÄΩ·Ä¨·Ä∏·Äû·Ää·Ä∑·Ä∫ ·Äõ·ÄÄ·Ä∫·ÄÖ·ÄΩ·Ä≤:">Delivery Date:</span>
        <span class="info-value" id="deliveryDate">Not recorded</span>
      </div>
    </div>

    <!-- Postpartum Care Form -->
    <div class="form-container">
      <form id="postpartumForm">
        <!-- Visit Information -->
        <div class="form-section">
          <h4><i class="fas fa-calendar-alt"></i><span class="lang-text" data-en="Visit Information" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫ ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äõ·Äæ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·ÄØ·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Äõ·Ä¨ ·Äû·Äê·ÄÑ·Ä∫·Ä∏·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫">Visit Information</span></h4>
          <div class="row">
            <div class="col-md-6">
              <label for="visitDate" class="form-label lang-text" data-en="Visit Date (mm/dd/yyyy)" data-my="·Äï·Äº·Äû·Äû·Ää·Ä∑·Ä∫ ·Äõ·ÄÄ·Ä∫·ÄÖ·ÄΩ·Ä≤ (·Äú/·Äõ·ÄÄ·Ä∫·ÄÖ·ÄΩ·Ä≤/·ÄÅ·ÄØ·Äî·Äæ·ÄÖ·Ä∫)">Visit Date (mm/dd/yyyy) *</label>
              <input type="date" class="form-control" id="visitDate" required>
            </div>
            <div class="col-md-6">
              <label for="visitNumber" class="form-label lang-text" data-en="Visit Number" data-my="·Ä°·ÄÄ·Äº·Ä≠·Äô·Ä∫·Ä°·Äõ·Ä±·Ä°·Äê·ÄΩ·ÄÄ·Ä∫">Visit Number</label>
              <input type="number" class="form-control" id="visitNumber" min="1" readonly>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-6">
              <label for="deliveredDateTime" class="form-label lang-text" data-en="Delivered Date & Time" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äñ·ÄΩ·Ä¨·Ä∏·Äû·Ää·Ä∑·Ä∫ ·Äõ·ÄÄ·Ä∫·ÄÖ·ÄΩ·Ä≤·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫">Delivered Date & Time</label>
              <input type="datetime-local" class="form-control" id="deliveredDateTime">
            </div>
            <div class="col-md-6">
              <label class="form-label lang-text" data-en="Post-partum Period&#10;Day ‚ñ°      Hour ‚ñ°" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äñ·ÄΩ·Ä¨·Ä∏·Äï·Äº·ÄÆ·Ä∏·ÄÄ·Ä¨·Äú&#10;·Äõ·ÄÄ·Ä∫ ‚ñ°      ·Äî·Ä¨·Äõ·ÄÆ ‚ñ°">Post-partum Period<br>Day <span id="postpartumDays">‚Äî</span>      Hour <span id="postpartumHours">‚Äî</span></label>
              <div class="form-control" style="background: #f8f9fa; padding: 0.75rem;">
                <small class="text-muted lang-text" data-en="Auto-calculated from delivery date" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äñ·ÄΩ·Ä¨·Ä∏·Äû·Ää·Ä∑·Ä∫ ·Äõ·ÄÄ·Ä∫·ÄÖ·ÄΩ·Ä≤·Äô·Äæ ·Ä°·Äú·Ä≠·ÄØ·Ä°·Äú·Äª·Ä±·Ä¨·ÄÄ·Ä∫ ·Äê·ÄΩ·ÄÄ·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·Äû·Ää·Ä∫">Auto-calculated from delivery date</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Vital Signs -->
        <div class="form-section">
          <h4><i class="fas fa-heartbeat"></i><span class="lang-text" data-en="Vital Signs" data-my="Vital Signs">Vital Signs</span></h4>
          <div class="row">
            <div class="col-md-3">
              <label for="temperature" class="form-label lang-text" data-en="Temperature (¬∞C)" data-my="·ÄÄ·Ä≠·ÄØ·Äö·Ä∫·Ä°·Äï·Ä∞·ÄÅ·Äª·Ä≠·Äî·Ä∫">Temperature (¬∞C)</label>
              <input type="number" class="form-control" id="temperature" step="0.1" min="35" max="42">
            </div>
            <div class="col-md-3">
              <label for="bloodPressure" class="form-label lang-text" data-en="Blood Pressure (mmHg)" data-my="·Äû·ÄΩ·Ä±·Ä∏·Äï·Ä±·Ä´·ÄÑ·Ä∫·ÄÅ·Äª·Ä≠·Äî·Ä∫ (mm Hg)">Blood Pressure (mmHg)</label>
              <input type="text" class="form-control" id="bloodPressure" placeholder="120/80">
            </div>
            <div class="col-md-3">
              <label for="pulseRate" class="form-label lang-text" data-en="Pulse Rate" data-my="·Äû·ÄΩ·Ä±·Ä∏·ÄÅ·ÄØ·Äî·Ä∫·Äî·Äæ·ÄØ·Äî·Ä∫·Ä∏">Pulse Rate</label>
              <input type="number" class="form-control" id="pulseRate" min="40" max="180">
            </div>
            <div class="col-md-3">
              <label for="hemoglobin" class="form-label">Hemoglobin (g/dl)</label>
              <input type="number" class="form-control" id="hemoglobin" step="0.1" min="5" max="20">
            </div>
          </div>
        </div>

        <!-- Physical Examination -->
        <div class="form-section">
          <h4><i class="fas fa-stethoscope"></i><span class="lang-text" data-en="Physical Examination" data-my="·Ä°·Äë·ÄΩ·Ä±·Äë·ÄΩ·Ä± ·ÄÖ·Äô·Ä∫·Ä∏·Äû·Äï·Ä∫·ÄÖ·ÄÖ·Ä∫·ÄÜ·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Physical Examination</span></h4>
          
          <!-- Breast Engorgement -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label lang-text" data-en="Breast Engorgement" data-my="·Äõ·ÄÑ·Ä∫·Äû·Ä¨·Ä∏·Äê·ÄÑ·Ä∫·Ä∏·Äô·Ä¨·Äô·Äæ·ÄØ ·Äõ·Äæ·Ä≠/·Äô·Äõ·Äæ·Ä≠">Breast Engorgement</label>
              <div class="yes-no-group">
                <div class="yes-no-option">
                  <input type="radio" name="breastEngorgement" id="breastEngorgementYes" value="Yes" class="form-check-input">
                  <label for="breastEngorgementYes" class="form-check-label lang-text" data-en="Yes" data-my="·Äõ·Äæ·Ä≠">Yes</label>
                </div>
                <div class="yes-no-option">
                  <input type="radio" name="breastEngorgement" id="breastEngorgementNo" value="No" class="form-check-input">
                  <label for="breastEngorgementNo" class="form-check-label lang-text" data-en="No" data-my="·Äô·Äõ·Äæ·Ä≠">No</label>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <label for="nippleCondition" class="form-label lang-text" data-en="Nipple Condition" data-my="·Äî·Ä≠·ÄØ·Ä∑·Äû·ÄÆ·Ä∏·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·Ä°·ÄÅ·Äº·Ä±·Ä°·Äî·Ä±">Nipple Condition</label>
              <select class="form-control" id="nippleCondition">
                <option value="">Select condition</option>
                <option value="Normal">Normal (·Äï·ÄØ·Ä∂·Äô·Äæ·Äî·Ä∫ ·Äî·Ä≠·ÄØ·Ä∑·Äû·ÄÆ·Ä∏·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏)</option>
                <option value="Cracked">Cracked (·Äî·Ä≠·ÄØ·Ä∑·Äû·ÄÆ·Ä∏·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·ÄÄ·ÄΩ·Ä≤·Ä°·ÄÄ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
                <option value="Inverted">Inverted (·Äî·Ä≠·ÄØ·Ä∑·Äû·ÄÆ·Ä∏·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äù·ÄÑ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
                <option value="Flat">Flat (·Äî·Ä≠·ÄØ·Ä∑·Äû·ÄÆ·Ä∏·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äï·Äº·Ä¨·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
                <option value="Inflamed">Inflamed (·Äî·Ä≠·ÄØ·Ä∑·Äû·ÄÆ·Ä∏·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏ ·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äõ·Äô·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
              </select>
            </div>
          </div>

          <!-- Breast Milk Production -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label lang-text" data-en="Breast Milk Production/Breast Feeding" data-my="·Äî·Ä≠·ÄØ·Ä∑·Äë·ÄΩ·ÄÄ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Äõ·Äæ·Ä≠/·Äô·Äõ·Äæ·Ä≠/ ·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫·Äî·Ä≠·ÄØ·Ä∑·Äê·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÄ·Äª·ÄΩ·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Breast Milk Production/Breast Feeding</label>
              <div class="yes-no-group">
                <div class="yes-no-option">
                  <input type="radio" name="breastMilkProduction" id="breastMilkYes" value="Yes" class="form-check-input">
                  <label for="breastMilkYes" class="form-check-label lang-text" data-en="Yes" data-my="·Äõ·Äæ·Ä≠">Yes</label>
                </div>
                <div class="yes-no-option">
                  <input type="radio" name="breastMilkProduction" id="breastMilkNo" value="No" class="form-check-input">
                  <label for="breastMilkNo" class="form-check-label lang-text" data-en="No" data-my="·Äô·Äõ·Äæ·Ä≠">No</label>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <label for="uterusInvolution" class="form-label lang-text" data-en="Uterine Involution" data-my="·Äû·Ä¨·Ä∏·Ä°·Ä≠·Äô·Ä∫ ·Äú·ÄØ·Ä∂·Ä∏·Äô·Ä¨·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏/·Äù·Äï·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Äõ·Äæ·Ä≠/·Äô·Äõ·Äæ·Ä≠">Uterine Involution</label>
              <select class="form-control" id="uterusInvolution">
                <option value="">Select status</option>
                <option value="Normal">Normal (·Äï·ÄØ·Ä∂·Äô·Äæ·Äî·Ä∫ ·Äû·Ä¨·Ä∏·Ä°·Ä≠·Äô·Ä∫·Äï·Äº·Äî·Ä∫·Äù·Äï·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
                <option value="Delayed">Delayed (·Äû·Ä¨·Ä∏·Ä°·Ä≠·Äô·Ä∫·Äï·Äº·Äî·Ä∫·Äù·Äï·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Äî·Äæ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äî·Äæ·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
                <option value="Subinvolution">Subinvolution (·Äû·Ä¨·Ä∏·Ä°·Ä≠·Äô·Ä∫·Äï·Äº·Äî·Ä∫·Äô·Äù·Äï·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
              </select>
            </div>
          </div>

          <!-- Vaginal Discharge -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="vaginalBleeding" class="form-label lang-text" data-en="Vaginal Discharge (Lochia)" data-my="·Äô·Ä≠·Äî·Ä∫·Ä∏·Äô·ÄÄ·Ä≠·ÄØ·Äö·Ä∫·Äô·Äæ ·Äû·ÄΩ·Ä±·Ä∏·ÄÜ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Vaginal Discharge (Lochia)</label>
              <select class="form-control" id="vaginalBleeding">
                <option value="">Select type</option>
                <option value="Rubra">Rubra (Red) (·Äû·ÄΩ·Ä±·Ä∏·Äî·ÄÆ/·Äû·ÄΩ·Ä±·Ä∏·Äõ·Ä≤·Äõ·Ä≤)</option>
                <option value="Serosa">Serosa (Pinkish) (·Äû·ÄΩ·Ä±·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äñ·Äª·Ä±·Ä¨·Ä∑/·Äï·Äî·Ä∫·Ä∏·Äõ·Ä±·Ä¨·ÄÑ·Ä∫·Äû·Äî·Ä∫·Ä∏·Äû·Ä±·Ä¨)</option>
                <option value="Alba">Alba (White/Yellow) (·Ä°·Äñ·Äº·Ä∞/·Ä°·Äù·Ä´)</option>
                <option value="Heavy bleeding">Heavy Bleeding (·Äû·ÄΩ·Ä±·Ä∏·ÄÜ·ÄÑ·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏/·Äû·ÄΩ·Ä±·Ä∏·Äû·ÄΩ·Äî·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
                <option value="No bleeding">No Bleeding (·Äû·ÄΩ·Ä±·Ä∏ ·Äô·ÄÜ·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏)</option>
              </select>
              <small class="text-danger mt-1 d-block lang-text" data-en="If select &quot;Heavy Bleeding&quot;, move to PPH Card" data-my="·Äô·Ä≠·Äî·Ä∫·Ä∏·Äô·ÄÄ·Ä≠·ÄØ·Äö·Ä∫·Äô·Äæ ·Äû·ÄΩ·Ä±·Ä∏·ÄÜ·ÄÑ·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ (·Äû·Ä≠·ÄØ·Ä∑) ·Äû·ÄΩ·Ä±·Ä∏·Äû·ÄΩ·Äî·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä´·ÄÄ PPH ·Äô·Äª·Ä¨·Ä∏ ·Äñ·Äº·ÄÖ·Ä∫·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·ÄÅ·Äª·Ä±·Äõ·Äæ·Ä≠·Äû·Ä±·Ä¨ ·Äï·ÄØ·Ä∂·ÄÖ·Ä∂·Äû·Ä≠·ÄØ·Ä∑ ·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äû·ÄΩ·Ä¨·Ä∏·Äõ·Äô·Ää·Ä∫·Åã">If select "Heavy Bleeding", move to PPH Card</small>
            </div>
            <div class="col-md-6">
              <label for="episiotomyHealing" class="form-label">Episiotomy Wound Healing</label>
              <select class="form-control" id="episiotomyHealing">
                <option value="">Select status</option>
                <option value="Healing well">Healing well</option>
                <option value="Infected">Infected</option>
                <option value="Dehiscence">Dehiscence</option>
                <option value="No episiotomy">No episiotomy</option>
              </select>
            </div>
          </div>

          <!-- Abnormal Signs -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label lang-text" data-en="Abnormal Signs (Temperature ‚â• 38¬∞C, Pain, Abnormal Vaginal Discharge)" data-my="·Ä°·Äë·Ä∞·Ä∏·Äú·ÄÄ·Äπ·ÄÅ·Äè·Ä¨·Äô·Äª·Ä¨·Ä∏&#10;·ÄÄ·Ä≠·ÄØ·Äö·Ä∫·Ä°·Äï·Ä∞·ÄÅ·Äª·Ä≠·Äî·Ä∫ (·ÅÉ·Åà ·Äí·ÄÆ·ÄÇ·Äõ·ÄÆ·ÄÖ·ÄÑ·Ä∫·Äê·ÄÆ·ÄÇ·Äõ·Ä≠·Äê·Ä∫ ·Äë·ÄÄ·Ä∫) ·Äï·Ä≠·ÄØ·Äî·Ä±·Äú·Äª·Äæ·ÄÑ·Ä∫·Åä ·Äî·Ä¨·ÄÄ·Äª·ÄÑ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ (·Äû·Ä≠·ÄØ·Ä∑) ·Äô·Ä≠·Äî·Ä∫·Ä∏·Äô·ÄÄ·Ä≠·ÄØ·Äö·Ä∫·Äô·Äæ ·Äõ·Äæ·ÄÄ·Ä∫·Äñ·ÄΩ·Äö·Ä∫ ·Äû·ÄΩ·Ä±·Ä∏/·Ä°·Äõ·Ää·Ä∫ ·ÄÜ·ÄÑ·Ä∫·Ä∏·Äî·Ä±·Äú·Äª·Äæ·ÄÑ·Ä∫ ·Äõ·Äæ·Ä≠/·Äô·Äõ·Äæ·Ä≠">Abnormal Signs (Temperature ‚â• 38¬∞C, Pain, Abnormal Vaginal Discharge)</label>
              <div class="yes-no-group">
                <div class="yes-no-option">
                  <input type="radio" name="abnormalSigns" id="abnormalSignsYes" value="Yes" class="form-check-input">
                  <label for="abnormalSignsYes" class="form-check-label lang-text" data-en="Yes" data-my="·Äõ·Äæ·Ä≠">Yes</label>
                </div>
                <div class="yes-no-option">
                  <input type="radio" name="abnormalSigns" id="abnormalSignsNo" value="No" class="form-check-input">
                  <label for="abnormalSignsNo" class="form-check-label lang-text" data-en="No" data-my="·Äô·Äõ·Äæ·Ä≠">No</label>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label lang-text" data-en="Constipation" data-my="·Äù·Äô·Ä∫·Ä∏·ÄÅ·Äª·ÄØ·Äï·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Äõ·Äæ·Ä≠/·Äô·Äõ·Äæ·Ä≠">Constipation</label>
              <div class="yes-no-group">
                <div class="yes-no-option">
                  <input type="radio" name="constipation" id="constipationYes" value="Yes" class="form-check-input">
                  <label for="constipationYes" class="form-check-label lang-text" data-en="Yes" data-my="·Äõ·Äæ·Ä≠">Yes</label>
                </div>
                <div class="yes-no-option">
                  <input type="radio" name="constipation" id="constipationNo" value="No" class="form-check-input">
                  <label for="constipationNo" class="form-check-label lang-text" data-en="No" data-my="·Äô·Äõ·Äæ·Ä≠">No</label>
                </div>
              </div>
            </div>
          </div>

          <!-- Mental Health Assessment -->
          <div class="row">
            <div class="col-md-12">
              <label for="mentalHealthAssessment" class="form-label lang-text" data-en="Maternal Mental Health Assessment&#10;(Notes / concerns)" data-my="·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫·Åè ·ÄÖ·Ä≠·Äê·Ä∫·ÄÄ·Äª·Äî·Ä∫·Ä∏·Äô·Ä¨·Äõ·Ä±·Ä∏·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Äõ·Ä¨ ·Äú·ÄÄ·Äπ·ÄÅ·Äè·Ä¨·Äô·Äª·Ä¨·Ä∏ ·ÄÜ·Äî·Ä∫·Ä∏·ÄÖ·ÄÖ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏&#10;(·Äô·Äæ·Äê·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏/ ·ÄÖ·Ä≠·ÄØ·Ä∏·Äõ·Ä≠·Äô·Ä∫·Äõ·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏)">Maternal Mental Health Assessment<br>(Notes / concerns)</label>
              <textarea class="form-control" id="mentalHealthAssessment" rows="3" placeholder="Enter notes or concerns..."></textarea>
            </div>
          </div>
        </div>

        <!-- Treatment & Counselling -->
        <div class="form-section">
          <h4><i class="fas fa-pills"></i><span class="lang-text" data-en="Treatment & Counselling" data-my="·ÄÜ·Ä±·Ä∏·ÄÄ·ÄØ·Äû·Äô·Äæ·ÄØ·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Treatment & Counselling</span></h4>
          <div class="row">
            <div class="col-md-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="vitaminBComplex">
                <label class="form-check-label lang-text" for="vitaminBComplex" data-en="Vitamin B Complex" data-my="·Äó·ÄÆ·Äê·Ä¨·Äô·ÄÑ·Ä∫ ·Äò·ÄÆ·Äù·Äô·Ä∫·Ä∏">
                  Vitamin B Complex
                </label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="vitaminA">
                <label class="form-check-label lang-text" for="vitaminA" data-en="Vitamin A" data-my="·Äó·ÄÆ·Äê·Ä¨·Äô·ÄÑ·Ä∫ ·Ä°·Ä±">
                  Vitamin A
                </label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="ironFolic">
                <label class="form-check-label lang-text" for="ironFolic" data-en="Iron & Folic Acid Tablet" data-my="·Äû·Ä∂·Äì·Ä´·Äê·Ä∫·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·Äñ·Ä±·Ä¨·Äú·ÄÖ·Ä∫·Ä°·ÄÄ·Ä∫·ÄÜ·ÄÖ·Ä∫ ·Ä°·Ä¨·Ä∏·ÄÜ·Ä±·Ä∏">
                  Iron & Folic Acid Tablet
                </label>
              </div>
            </div>
            <div class="col-md-3">
              <label class="form-label lang-text" data-en="Contraception (42 days after birth)" data-my="·Äû·Ä¨·Ä∏·ÄÜ·ÄÄ·Ä∫·ÄÅ·Äº·Ä¨·Ä∏·Äî·Ää·Ä∫·Ä∏·Äú·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·Ä°·ÄÄ·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏ ·ÄÜ·ÄΩ·Ä±·Ä∏·Äî·ÄΩ·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ (·Äô·ÄΩ·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏ ·ÅÑ·ÅÇ ·Äõ·ÄÄ·Ä∫ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏)">Contraception (42 days after birth)</label>
              <div class="yes-no-group">
                <div class="yes-no-option">
                  <input type="radio" name="contraception" id="contraceptionYes" value="Yes" class="form-check-input">
                  <label for="contraceptionYes" class="form-check-label lang-text" data-en="Yes" data-my="·Äõ·Äæ·Ä≠">Yes</label>
                </div>
                <div class="yes-no-option">
                  <input type="radio" name="contraception" id="contraceptionNo" value="No" class="form-check-input">
                  <label for="contraceptionNo" class="form-check-label lang-text" data-en="No" data-my="·Äô·Äõ·Äæ·Ä≠">No</label>
                </div>
              </div>
            </div>
          </div>
          <!-- Contraceptive Methods (shown if Yes selected) -->
          <div class="row mt-3" id="contraceptiveMethodsGroup" style="display: none;">
            <div class="col-md-12">
              <label class="form-label lang-text" data-en="if &quot;Yes&quot;, select below contraceptive methods" data-my="·Ä°·Ä±·Ä¨·ÄÄ·Ä∫·Äï·Ä´·Äû·Ä¨·Ä∏·ÄÜ·ÄÄ·Ä∫·ÄÅ·Äº·Ä¨·Ä∏·Äî·Ää·Ä∫·Ä∏·Äú·Äô·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·Äô·Äæ ·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äë·Ä¨·Ä∏·Äû·Ää·Ä∑·Ä∫·Äî·Ää·Ä∫·Ä∏·Äú·Äô·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äõ·ÄΩ·Ä±·Ä∏·Äï·Ä´">if &quot;Yes&quot;, select below contraceptive methods:</label>
              <div class="checkbox-group">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="contraceptionInjection" name="contraceptiveMethod" value="Injection">
                  <label class="form-check-label lang-text" for="contraceptionInjection" data-en="Injection" data-my="·Äë·Ä≠·ÄØ·Ä∏·ÄÜ·Ä±·Ä∏">Injection</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="contraceptionPills" name="contraceptiveMethod" value="Pills">
                  <label class="form-check-label lang-text" for="contraceptionPills" data-en="Pills" data-my="·ÄÜ·Ä±·Ä∏·Äï·Äº·Ä¨·Ä∏·Ä°·Äû·Ä±·Ä¨·ÄÄ·Ä∫">Pills</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="contraceptionCondom" name="contraceptiveMethod" value="Condom">
                  <label class="form-check-label lang-text" for="contraceptionCondom" data-en="Condom" data-my="·ÄÄ·ÄΩ·Äî·Ä∫·Äí·ÄØ·Ä∂·Ä∏">Condom</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="contraceptionIUD" name="contraceptiveMethod" value="IUD">
                  <label class="form-check-label lang-text" for="contraceptionIUD" data-en="Intra Uterine Device (IUD)" data-my="·Äû·Ä¨·Ä∏·Ä°·Ä≠·Äô·Ä∫·Äê·ÄΩ·ÄÑ·Ä∫·Ä∏·Äë·Ää·Ä∑·Ä∫·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏">Intra Uterine Device (IUD)</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="contraceptionImplant" name="contraceptiveMethod" value="Implant">
                  <label class="form-check-label lang-text" for="contraceptionImplant" data-en="Implant" data-my="·Äú·ÄÄ·Ä∫·Äô·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äê·ÄΩ·ÄÑ·Ä∫·Ä∏·Äë·Ää·Ä∑·Ä∫·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏">Implant</label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Danger Signs -->
        <div class="form-section danger-signs-section">
          <h4><i class="fas fa-exclamation-triangle"></i><span class="lang-text" data-en="Danger Signs Assessment" data-my="·Ä°·Äî·Äπ·Äê·Äõ·Ä¨·Äö·Ä∫·Äú·ÄÄ·Äπ·ÄÅ·Äè·Ä¨·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·ÄÜ·Äî·Ä∫·Ä∏·ÄÖ·ÄÖ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Danger Signs Assessment</span></h4>
          <p class="text-danger mb-3 lang-text" data-en="If any of the following signs occur, advise immediate referral:" data-my="·Äñ·Ä±·Ä¨·Ä∫·Äï·Äº·Äï·Ä´ ·Äú·ÄÄ·Äπ·ÄÅ·Äè·Ä¨·Äô·Äª·Ä¨·Ä∏·Ä°·Äî·ÄÄ·Ä∫·Äô·Äæ ·Äê·ÄÖ·Ä∫·ÄÅ·ÄØ·ÄÅ·ÄØ·Äñ·Äº·ÄÖ·Ä∫·Äï·Ä±·Ä´·Ä∫·Äú·Ä¨·Äï·Ä´·ÄÄ ·ÄÜ·Ä±·Ä∏·Äõ·ÄØ·Ä∂ (·Äû·Ä≠·ÄØ·Ä∑·Äô·Äü·ÄØ·Äê·Ä∫) ·ÄÄ·Äª·Äî·Ä∫·Ä∏·Äô·Ä¨·Äõ·Ä±·Ä∏·Äå·Ä¨·Äî·Äû·Ä≠·ÄØ·Ä∑ ·Äî·Ä±·Ä∑·Ää·Äô·ÄÜ·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏ ·ÄÅ·Äª·ÄÄ·Ä∫·ÄÅ·Äª·ÄÑ·Ä∫·Ä∏ ·Äû·ÄΩ·Ä¨·Ä∏·Äõ·Äô·Ää·Ä∫·Åã">
            <strong>If any of the following signs occur, advise immediate referral:</strong>
          </p>
          
          <div class="checkbox-group">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="heavyBleeding">
              <label class="form-check-label" for="heavyBleeding">
                Heavy vaginal bleeding
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="severeHeadache">
              <label class="form-check-label" for="severeHeadache">
                Severe headache, Blurred vision
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="convulsions">
              <label class="form-check-label" for="convulsions">
                Convulsions
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="breathingProblems">
              <label class="form-check-label" for="breathingProblems">
                Fast breathing, Difficulty in breathing
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="feverFatigue">
              <label class="form-check-label" for="feverFatigue">
                Fever, Fatigue
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="breastEngorgementDanger">
              <label class="form-check-label" for="breastEngorgementDanger">
                Breast engorgement/ Nipple inflammation, redness, tenderness
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="urinaryProblems">
              <label class="form-check-label" for="urinaryProblems">
                Difficulty in micturition, Urinary incontinence
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="woundInflammation">
              <label class="form-check-label" for="woundInflammation">
                Episiotomy wound inflammation and tenderness
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="foulDischarge">
              <label class="form-check-label" for="foulDischarge">
                Foul smelling vaginal discharge
              </label>
            </div>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="form-section">
          <h4><i class="fas fa-notes-medical"></i><span class="lang-text" data-en="Additional Information" data-my="">Additional Information</span></h4>
          <div class="row">
            <div class="col-md-6">
              <label for="otherSymptoms" class="form-label lang-text" data-en="Other Symptoms&#10;Describe any other symptoms or concerns" data-my="·Ä°·ÄÅ·Äº·Ä¨·Ä∏ ·Äú·ÄÄ·Äπ·ÄÅ·Äè·Ä¨·Äô·Äª·Ä¨·Ä∏&#10;·Ä°·ÄÅ·Äº·Ä¨·Ä∏·Äú·ÄÄ·Äπ·ÄÅ·Äè·Ä¨·Äô·Äª·Ä¨·Ä∏ ·Äû·Ä≠·ÄØ·Ä∑ ·ÄÖ·Ä≠·ÄØ·Ä∏·Äõ·Ä≠·Äô·Ä∫·Äû·Ä±·Ä¨·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏ ·Äõ·Äæ·Ä≠·Äï·Ä´·ÄÄ ·Äñ·Ä±·Ä¨·Ä∫·Äï·Äº·Äï·Ä´·Åã">Other Symptoms<br>Describe any other symptoms or concerns</label>
              <textarea class="form-control" id="otherSymptoms" rows="3" placeholder="Describe any other symptoms or concerns..."></textarea>
            </div>
            <div class="col-md-6">
              <label for="treatment" class="form-label lang-text" data-en="Treatment Given&#10;Describe treatment provided" data-my="·ÄÄ·ÄØ·Äû·Äô·Äæ·ÄØ·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏&#10;·ÄÄ·ÄØ·Äû·Äô·Äæ·ÄØ·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Äñ·Ä±·Ä¨·Ä∫·Äï·Äº·Äï·Ä´·Åã">Treatment Given<br>Describe treatment provided</label>
              <textarea class="form-control" id="treatment" rows="3" placeholder="Describe treatment provided..."></textarea>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-6">
              <label class="form-label lang-text" data-en="Referral Given" data-my="·Äú·ÄΩ·Äæ·Ä≤·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ää·ÄΩ·Äæ·Äî·Ä∫·Ä∏·Äï·Ä≠·ÄØ·Ä∑·Äô·Äæ·ÄØ·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏">Referral Given</label>
              <div class="yes-no-group">
                <div class="yes-no-option">
                  <input type="radio" name="referralGiven" id="referralGivenYes" value="Yes" class="form-check-input">
                  <label for="referralGivenYes" class="form-check-label lang-text" data-en="Yes" data-my="·Äú·ÄΩ·Äæ·Ä≤·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ää·ÄΩ·Äæ·Äî·Ä∫·Ä∏·Äï·Ä≠·ÄØ·Ä∑·Äû·Ää·Ä∫">Yes</label>
                </div>
                <div class="yes-no-option">
                  <input type="radio" name="referralGiven" id="referralGivenNo" value="No" class="form-check-input">
                  <label for="referralGivenNo" class="form-check-label lang-text" data-en="No" data-my="·Äú·ÄΩ·Äæ·Ä≤·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ää·ÄΩ·Äæ·Äî·Ä∫·Ä∏·Äï·Ä≠·ÄØ·Ä∑·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·Äô·Äõ·Äæ·Ä≠·Äï·Ä´">No</label>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <label for="referralReason" class="form-label lang-text" data-en="Reason for Referral" data-my="·Äú·ÄΩ·Äæ·Ä≤·Äï·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ää·ÄΩ·Äæ·Äî·Ä∫·Ä∏·Äï·Ä≠·ÄØ·Ä∑·Äû·Ää·Ä∑·Ä∫ ·Ä°·ÄÄ·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Ä°·Äõ·ÄÑ·Ä∫·Ä∏">Reason for Referral</label>
              <input type="text" class="form-control" id="referralReason" placeholder="Reason for referral...">
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              <label for="clinicalNotes" class="form-label lang-text" data-en="Clinical Notes&#10;Additional clinical observations and recommendations" data-my="·ÄÜ·Ä±·Ä∏·ÄÄ·ÄØ·Äû·Äô·Äæ·ÄØ·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏&#10;·ÄÜ·Ä±·Ä∏·ÄÄ·ÄØ·Äû·ÄÖ·Äâ·Ä∫ ·Äê·ÄΩ·Ä±·Ä∑·Äõ·Äæ·Ä≠·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·Ä°·ÄÄ·Äº·Ä∂·Äï·Äº·ÄØ·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏·Äõ·Äæ·Ä≠·Äï·Ä´·ÄÄ ·Äñ·Ä±·Ä¨·Ä∫·Äï·Äº·Äï·Ä´·Åã">Clinical Notes<br>Additional clinical observations and recommendations</label>
              <textarea class="form-control" id="clinicalNotes" rows="4" placeholder="Additional clinical observations and recommendations..."></textarea>
            </div>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="text-center mt-4">
          <button type="button" class="btn btn-secondary-action me-3" onclick="window.location.href='postpartum-care.html'">
            <i class="fas fa-times me-2"></i><span class="lang-text" data-en="Cancel" data-my="·Äï·Äö·Ä∫·Äñ·Äª·ÄÄ·Ä∫·Äõ·Äî·Ä∫">Cancel</span>
          </button>
          <button type="submit" class="btn btn-primary-action">
            <i class="fas fa-save me-2"></i><span class="lang-text" data-en="Save Postpartum Visit" data-my="·Äô·ÄΩ·Ä±·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äô·Ä≠·ÄÅ·ÄÑ·Ä∫ ·ÄÖ·Ä±·Ä¨·ÄÑ·Ä∑·Ä∫·Äõ·Äæ·Ä±·Ä¨·ÄÄ·Ä∫·Äô·Äæ·ÄØ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äõ·Äî·Ä∫">Save Postpartum Visit</span>
          </button>
        </div>
      </form>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Loading patient data...</p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
     
      <p class="copyright">¬© 2025 Maternal & Child Health Care System ‚Äî Designed for clinical excellence - Powered by Jhpiego Myanmar</p>
    </div>
  </footer>

  <script>
    let currentUser = null;
    let currentPatient = null;
    
    // Language switching
    let currentLanguage = localStorage.getItem('appLanguage') || 'en';

    // Language switching function
    function switchLanguage(lang) {
      currentLanguage = lang;
      localStorage.setItem('appLanguage', lang);
      
      // Update active button
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
      
      // Update all text elements with lang-text class
      document.querySelectorAll('.lang-text').forEach(el => {
        const text = el.dataset[lang] || el.dataset.en || el.textContent;
        // Handle line breaks
        el.innerHTML = text.replace(/&#10;/g, '<br>').replace(/\n/g, '<br>');
      });
    }

    // Calculate postpartum period
    function calculatePostpartumPeriod() {
      const deliveredDateTime = document.getElementById('deliveredDateTime').value;
      if (!deliveredDateTime) {
        document.getElementById('postpartumDays').textContent = '‚Äî';
        document.getElementById('postpartumHours').textContent = '‚Äî';
        return;
      }
      
      const deliveryDate = new Date(deliveredDateTime);
      const now = new Date();
      const diffMs = now - deliveryDate;
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      const diffHours = Math.floor((diffMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      
      document.getElementById('postpartumDays').textContent = diffDays;
      document.getElementById('postpartumHours').textContent = diffHours;
    }

    // Toggle contraceptive methods visibility
    function toggleContraceptiveMethods() {
      const contraceptionYes = document.getElementById('contraceptionYes');
      const methodsGroup = document.getElementById('contraceptiveMethodsGroup');
      if (contraceptionYes && methodsGroup) {
        methodsGroup.style.display = contraceptionYes.checked ? 'block' : 'none';
      }
    }

    // Initialize Firebase and load data
    firebase.auth().onAuthStateChanged(async (user) => {
      if (user) {
        currentUser = user;
        await loadPatientFromURL();
      } else {
        window.location.href = 'login.html';
      }
    });

    // Load patient from URL parameter
    async function loadPatientFromURL() {
      try {
        showLoading(true);
        
        const urlParams = new URLSearchParams(window.location.search);
        const patientId = urlParams.get('patient');
        
        if (!patientId) {
          alert('No patient ID provided');
          window.location.href = 'postpartum-care.html';
          return;
        }
        
        const db = firebase.firestore();
        const patientDoc = await db.collection('patients').doc(patientId).get();
        
        if (!patientDoc.exists) {
          alert('Patient not found');
          window.location.href = 'postpartum-care.html';
          return;
        }
        
        currentPatient = { id: patientDoc.id, ...patientDoc.data() };
        
        // Populate patient information
        document.getElementById('patientName').textContent = currentPatient.name || 'Unknown';
        document.getElementById('patientAge').textContent = currentPatient.age || 'N/A';
        document.getElementById('patientPhone').textContent = currentPatient.phone || 'Not provided';
        
        if (currentPatient.deliveryDate) {
          document.getElementById('deliveryDate').textContent = new Date(currentPatient.deliveryDate).toLocaleDateString();
        }
        
        // Set default visit date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('visitDate').value = today;
        
        // Set delivery date if available
        if (currentPatient.deliveryDate) {
          const deliveryDate = new Date(currentPatient.deliveryDate);
          const deliveryDateTime = deliveryDate.toISOString().slice(0, 16);
          document.getElementById('deliveredDateTime').value = deliveryDateTime;
          calculatePostpartumPeriod();
        }
        
        // Calculate visit number
        await calculateVisitNumber();
        
        // Set up event listeners
        document.getElementById('deliveredDateTime').addEventListener('change', calculatePostpartumPeriod);
        document.getElementById('contraceptionYes').addEventListener('change', toggleContraceptiveMethods);
        document.getElementById('contraceptionNo').addEventListener('change', toggleContraceptiveMethods);
        
        showLoading(false);
        
      } catch (error) {
        console.error('Error loading patient:', error);
        alert('Error loading patient data: ' + error.message);
        showLoading(false);
      }
    }

    // Calculate visit number
    async function calculateVisitNumber() {
      try {
        const db = firebase.firestore();
        const visitsSnapshot = await db.collection('patients')
          .doc(currentPatient.id)
          .collection('postpartum_visits')
          .orderBy('visitDate', 'asc')
          .get();
        
        const visitNumber = visitsSnapshot.size + 1;
        document.getElementById('visitNumber').value = visitNumber;
        
      } catch (error) {
        console.error('Error calculating visit number:', error);
        document.getElementById('visitNumber').value = 1;
      }
    }

    // Show/hide loading spinner
    function showLoading(show) {
      const spinner = document.getElementById('loadingSpinner');
      const container = document.querySelector('.container');
      
      if (show) {
        spinner.style.display = 'block';
        container.style.display = 'none';
      } else {
        spinner.style.display = 'none';
        container.style.display = 'block';
      }
    }

    // Form submission
    document.getElementById('postpartumForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      try {
        // Get contraceptive methods
        const contraceptiveMethods = [];
        document.querySelectorAll('input[name="contraceptiveMethod"]:checked').forEach(cb => {
          contraceptiveMethods.push(cb.value);
        });
        
        // Get Yes/No radio button values
        const getRadioValue = (name) => {
          const selected = document.querySelector(`input[name="${name}"]:checked`);
          return selected ? selected.value : null;
        };
        
        const formData = {
          visitDate: document.getElementById('visitDate').value,
          visitNumber: parseInt(document.getElementById('visitNumber').value),
          deliveredDateTime: document.getElementById('deliveredDateTime').value || null,
          postpartumDays: parseInt(document.getElementById('postpartumDays').textContent) || null,
          postpartumHours: parseInt(document.getElementById('postpartumHours').textContent) || null,
          temperature: document.getElementById('temperature').value || null,
          bloodPressure: document.getElementById('bloodPressure').value || null,
          pulseRate: document.getElementById('pulseRate').value || null,
          hemoglobin: document.getElementById('hemoglobin').value || null,
          breastEngorgement: getRadioValue('breastEngorgement'),
          nippleCondition: document.getElementById('nippleCondition').value,
          breastMilkProduction: getRadioValue('breastMilkProduction'),
          uterusInvolution: document.getElementById('uterusInvolution').value,
          vaginalBleeding: document.getElementById('vaginalBleeding').value,
          episiotomyHealing: document.getElementById('episiotomyHealing').value,
          abnormalSigns: getRadioValue('abnormalSigns'),
          constipation: getRadioValue('constipation'),
          mentalHealthAssessment: document.getElementById('mentalHealthAssessment').value,
          vitaminBComplex: document.getElementById('vitaminBComplex').checked,
          vitaminA: document.getElementById('vitaminA').checked,
          ironFolic: document.getElementById('ironFolic').checked,
          contraception: getRadioValue('contraception'),
          contraceptiveMethods: contraceptiveMethods,
          dangerSigns: {
            heavyBleeding: document.getElementById('heavyBleeding').checked,
            severeHeadache: document.getElementById('severeHeadache').checked,
            convulsions: document.getElementById('convulsions').checked,
            breathingProblems: document.getElementById('breathingProblems').checked,
            feverFatigue: document.getElementById('feverFatigue').checked,
            breastEngorgementDanger: document.getElementById('breastEngorgementDanger').checked,
            urinaryProblems: document.getElementById('urinaryProblems').checked,
            woundInflammation: document.getElementById('woundInflammation').checked,
            foulDischarge: document.getElementById('foulDischarge').checked
          },
          otherSymptoms: document.getElementById('otherSymptoms').value,
          treatment: document.getElementById('treatment').value,
          referralGiven: getRadioValue('referralGiven'),
          referralReason: document.getElementById('referralReason').value,
          clinicalNotes: document.getElementById('clinicalNotes').value,
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          createdBy: currentUser.uid
        };
        
        const db = firebase.firestore();
        await db.collection('patients')
          .doc(currentPatient.id)
          .collection('postpartum_visits')
          .add(formData);
        
        // Update patient's last postpartum visit date
        await db.collection('patients')
          .doc(currentPatient.id)
          .update({
            lastPostpartumVisit: firebase.firestore.FieldValue.serverTimestamp()
          });

        // Update patient status to Postnatal Care
        await StatusManager.checkAndUpdateToPostnatalCare(currentPatient.id, 'First postnatal visit recorded');
        
        alert('Postpartum visit saved successfully!');
        window.location.href = 'postpartum-care.html';
        
      } catch (error) {
        console.error('Error saving postpartum visit:', error);
        alert('Error saving postpartum visit: ' + error.message);
      }
    });

    // Initialize language switcher on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize language switcher buttons
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          switchLanguage(this.dataset.lang);
        });
      });
      
      // Set initial language
      switchLanguage(currentLanguage);
    });
  </script>
</body>
</html>
