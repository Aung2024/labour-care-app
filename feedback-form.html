<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pilot Feedback Form - Maternal & Child Health Care System</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  
  <style>
    :root {
      --primary-color: #10b981;
      --secondary-color: #059669;
      --accent-color: #34d399;
      --light-bg: #f0fdf4;
      --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    body {
      background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 50%, #f0fdf4 100%);
      font-family: 'Inter', sans-serif;
      padding-bottom: 2rem;
      min-height: 100vh;
    }

    .header-section {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 1.5rem 0;
      margin-bottom: 2rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .header-section h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .header-section h1 i {
      font-size: 1.5rem;
    }

    .form-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .form-section {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04);
      border-left: 4px solid var(--primary-color);
      transition: all 0.3s ease;
    }

    .form-section:hover {
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.06);
      transform: translateY(-2px);
    }

    .section-title {
      color: var(--primary-color);
      font-weight: 700;
      font-size: 1.25rem;
      margin-bottom: 1.5rem;
      border-bottom: 3px solid var(--primary-color);
      padding-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-title i {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .form-label i {
      color: var(--primary-color);
      width: 18px;
    }

    .form-control, .form-select {
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 0.75rem 1rem;
      font-size: 0.95rem;
      transition: all 0.3s ease;
    }

    .form-control:focus, .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
      outline: none;
    }

    .form-control:required {
      border-left: 3px solid var(--primary-color);
    }

    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }

    .rating-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .rating-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
    }

    .rating-option:hover {
      border-color: var(--primary-color);
      background: var(--light-bg);
    }

    .rating-option input[type="radio"] {
      cursor: pointer;
      width: 18px;
      height: 18px;
    }

    .rating-option input[type="radio"]:checked + label {
      color: var(--primary-color);
      font-weight: 600;
    }

    .rating-option label {
      margin: 0;
      cursor: pointer;
      font-weight: 500;
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.75rem;
      margin-top: 0.5rem;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      background: #f9fafb;
      transition: all 0.2s ease;
    }

    .checkbox-item:hover {
      background: var(--light-bg);
      border-color: var(--primary-color);
    }

    .checkbox-item input[type="checkbox"] {
      cursor: pointer;
      width: 18px;
      height: 18px;
    }

    .checkbox-item label {
      margin: 0;
      cursor: pointer;
      font-weight: 400;
      font-size: 0.9rem;
    }

    .btn-submit {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
      margin: 2rem auto;
      display: block;
    }

    .btn-submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 12px -1px rgba(0, 0, 0, 0.15);
    }

    .btn-submit:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .alert {
      border-radius: 10px;
      padding: 1rem 1.5rem;
      margin-bottom: 1.5rem;
      border: none;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .alert-success {
      background: #d1fae5;
      color: #065f46;
    }

    .alert-danger {
      background: #fee2e2;
      color: #991b1b;
    }

    .required-indicator {
      color: #dc2626;
      margin-left: 0.25rem;
    }

    @media (max-width: 768px) {
      .header-section {
        padding: 1.25rem 0;
      }
      
      .header-section h1 {
        font-size: 1.5rem;
      }
      
      .form-section {
        padding: 1.5rem 1.25rem;
        border-radius: 12px;
      }

      .section-title {
        font-size: 1.1rem;
        margin-bottom: 1.25rem;
      }

      .rating-group {
        flex-direction: column;
        align-items: stretch;
      }

      .rating-option {
        width: 100%;
        justify-content: space-between;
      }

      .checkbox-group {
        grid-template-columns: 1fr;
      }

      .form-control, .form-select {
        padding: 0.625rem 0.875rem;
        font-size: 0.9rem;
      }

      .form-label {
        font-size: 0.9rem;
      }
    }

    @media (max-width: 576px) {
      .form-section {
        padding: 1.25rem 1rem;
        border-radius: 10px;
      }

      .header-section h1 {
        font-size: 1.25rem;
      }
    }
  </style>
</head>
<body>
  <div class="header-section">
    <div class="header-content">
      <h1>
        <i class="fas fa-comment-dots"></i>
        Pilot Feedback Form
      </h1>
      <button class="btn btn-outline-light btn-sm" onclick="window.location.href='list.html'">
        <i class="fas fa-arrow-left me-1"></i> Back to Patients
      </button>
    </div>
  </div>

  <div class="form-container">
    <div id="alertContainer"></div>

    <form id="feedbackForm">
      <!-- Basic Information -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-user"></i>
          Basic Information
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label class="form-label" for="midwifeName">
                <i class="fas fa-user-nurse"></i>
                Your Name <span class="required-indicator">*</span>
              </label>
              <input type="text" class="form-control" id="midwifeName" name="midwifeName" required>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="form-group">
              <label class="form-label" for="date">
                <i class="fas fa-calendar"></i>
                Date <span class="required-indicator">*</span>
              </label>
              <input type="date" class="form-control" id="date" name="date" required>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="facility">
            <i class="fas fa-hospital"></i>
            Facility/Clinic Name
          </label>
          <input type="text" class="form-control" id="facility" name="facility">
        </div>
      </div>

      <!-- Overall Experience -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-star"></i>
          Overall Experience
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-thumbs-up"></i>
            How would you rate your overall experience with the app? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="rating5" name="overallRating" value="5" required>
              <label for="rating5">Excellent (5)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="rating4" name="overallRating" value="4" required>
              <label for="rating4">Very Good (4)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="rating3" name="overallRating" value="3" required>
              <label for="rating3">Good (3)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="rating2" name="overallRating" value="2" required>
              <label for="rating2">Fair (2)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="rating1" name="overallRating" value="1" required>
              <label for="rating1">Poor (1)</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Usability -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-mobile-alt"></i>
          Usability & Ease of Use
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-check-circle"></i>
            How easy was it to navigate the app? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="nav5" name="navigationEase" value="5" required>
              <label for="nav5">Very Easy (5)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="nav4" name="navigationEase" value="4" required>
              <label for="nav4">Easy (4)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="nav3" name="navigationEase" value="3" required>
              <label for="nav3">Moderate (3)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="nav2" name="navigationEase" value="2" required>
              <label for="nav2">Difficult (2)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="nav1" name="navigationEase" value="1" required>
              <label for="nav1">Very Difficult (1)</label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-clock"></i>
            How easy was it to enter patient data? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="data5" name="dataEntryEase" value="5" required>
              <label for="data5">Very Easy (5)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="data4" name="dataEntryEase" value="4" required>
              <label for="data4">Easy (4)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="data3" name="dataEntryEase" value="3" required>
              <label for="data3">Moderate (3)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="data2" name="dataEntryEase" value="2" required>
              <label for="data2">Difficult (2)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="data1" name="dataEntryEase" value="1" required>
              <label for="data1">Very Difficult (1)</label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="usabilityComments">
            <i class="fas fa-comment"></i>
            Any comments about usability?
          </label>
          <textarea class="form-control" id="usabilityComments" name="usabilityComments" rows="3"></textarea>
        </div>
      </div>

      <!-- Features -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-cogs"></i>
          Features & Functionality
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-heart"></i>
            Which features did you find most useful? (Select all that apply)
          </label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="feature1" name="usefulFeatures" value="Patient Registration">
              <label for="feature1">Patient Registration</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature2" name="usefulFeatures" value="Antenatal Forms">
              <label for="feature2">Antenatal Forms</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature3" name="usefulFeatures" value="Labour Monitoring">
              <label for="feature3">Labour Monitoring</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature4" name="usefulFeatures" value="Labour Care Card (LCG)">
              <label for="feature4">Labour Care Card (LCG)</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature5" name="usefulFeatures" value="Newborn Care">
              <label for="feature5">Newborn Care</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature6" name="usefulFeatures" value="Postpartum Forms">
              <label for="feature6">Postpartum Forms</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature7" name="usefulFeatures" value="Patient List/Management">
              <label for="feature7">Patient List/Management</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="feature8" name="usefulFeatures" value="Data Viewing/Reports">
              <label for="feature8">Data Viewing/Reports</label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-plus-circle"></i>
            What features would you like to see added or improved? <span class="required-indicator">*</span>
          </label>
          <textarea class="form-control" id="featureSuggestions" name="featureSuggestions" rows="4" required></textarea>
        </div>
      </div>

      <!-- Issues & Problems -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-exclamation-triangle"></i>
          Issues & Problems
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-bug"></i>
            Did you encounter any technical issues or bugs? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="issuesYes" name="technicalIssues" value="yes" required>
              <label for="issuesYes">Yes</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="issuesNo" name="technicalIssues" value="no" required>
              <label for="issuesNo">No</label>
            </div>
          </div>
        </div>

        <div class="form-group" id="issuesDetailsGroup" style="display: none;">
          <label class="form-label" for="issuesDetails">
            <i class="fas fa-info-circle"></i>
            Please describe the issues you encountered:
          </label>
          <textarea class="form-control" id="issuesDetails" name="issuesDetails" rows="4"></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-wifi"></i>
            How was the app performance? (Speed, loading times, etc.) <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="perf5" name="performance" value="5" required>
              <label for="perf5">Excellent (5)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="perf4" name="performance" value="4" required>
              <label for="perf4">Very Good (4)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="perf3" name="performance" value="3" required>
              <label for="perf3">Good (3)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="perf2" name="performance" value="2" required>
              <label for="perf2">Fair (2)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="perf1" name="performance" value="1" required>
              <label for="perf1">Poor (1)</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Clinical Usefulness -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-stethoscope"></i>
          Clinical Usefulness
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-clipboard-check"></i>
            How useful is this app for your clinical practice? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="clinical5" name="clinicalUsefulness" value="5" required>
              <label for="clinical5">Extremely Useful (5)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="clinical4" name="clinicalUsefulness" value="4" required>
              <label for="clinical4">Very Useful (4)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="clinical3" name="clinicalUsefulness" value="3" required>
              <label for="clinical3">Moderately Useful (3)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="clinical2" name="clinicalUsefulness" value="2" required>
              <label for="clinical2">Slightly Useful (2)</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="clinical1" name="clinicalUsefulness" value="1" required>
              <label for="clinical1">Not Useful (1)</label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="clinicalComments">
            <i class="fas fa-comments"></i>
            How could the app better support your clinical workflow?
          </label>
          <textarea class="form-control" id="clinicalComments" name="clinicalComments" rows="4"></textarea>
        </div>
      </div>

      <!-- Training & Support -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-graduation-cap"></i>
          Training & Support
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-question-circle"></i>
            Did you receive adequate training on how to use the app? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="trainingYes" name="adequateTraining" value="yes" required>
              <label for="trainingYes">Yes</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="trainingNo" name="adequateTraining" value="no" required>
              <label for="trainingNo">No</label>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="trainingComments">
            <i class="fas fa-lightbulb"></i>
            What additional training or support would be helpful?
          </label>
          <textarea class="form-control" id="trainingComments" name="trainingComments" rows="3"></textarea>
        </div>
      </div>

      <!-- Overall Feedback -->
      <div class="form-section">
        <div class="section-title">
          <i class="fas fa-edit"></i>
          Additional Comments
        </div>
        
        <div class="form-group">
          <label class="form-label" for="additionalComments">
            <i class="fas fa-pencil-alt"></i>
            Any other comments, suggestions, or feedback? <span class="required-indicator">*</span>
          </label>
          <textarea class="form-control" id="additionalComments" name="additionalComments" rows="5" required></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-share"></i>
            Would you recommend this app to other midwives? <span class="required-indicator">*</span>
          </label>
          <div class="rating-group">
            <div class="rating-option">
              <input type="radio" id="recommendYes" name="wouldRecommend" value="yes" required>
              <label for="recommendYes">Yes</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="recommendNo" name="wouldRecommend" value="no" required>
              <label for="recommendNo">No</label>
            </div>
            <div class="rating-option">
              <input type="radio" id="recommendMaybe" name="wouldRecommend" value="maybe" required>
              <label for="recommendMaybe">Maybe</label>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-submit" id="submitBtn">
        <i class="fas fa-paper-plane me-2"></i>Submit Feedback
      </button>
    </form>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="js/firebase.js"></script>
  <script src="js/auth-guard.js"></script>
  <script src="js/session-manager.js"></script>
  <script src="js/audit-logger.js"></script>
  <script>
    // Set today's date as default
    document.getElementById('date').valueAsDate = new Date();

    // Show/hide issues details based on selection
    document.querySelectorAll('input[name="technicalIssues"]').forEach(radio => {
      radio.addEventListener('change', function() {
        const issuesDetailsGroup = document.getElementById('issuesDetailsGroup');
        if (this.value === 'yes') {
          issuesDetailsGroup.style.display = 'block';
          document.getElementById('issuesDetails').required = true;
        } else {
          issuesDetailsGroup.style.display = 'none';
          document.getElementById('issuesDetails').required = false;
          document.getElementById('issuesDetails').value = '';
        }
      });
    });

    // Form submission
    document.getElementById('feedbackForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const submitBtn = document.getElementById('submitBtn');
      const originalText = submitBtn.innerHTML;
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Submitting...';

      try {
        // Check authentication
        const user = firebase.auth().currentUser;
        if (!user) {
          throw new Error('You must be logged in to submit feedback');
        }

        // Collect form data
        const formData = new FormData(this);
        const feedbackData = {
          midwifeName: formData.get('midwifeName'),
          date: formData.get('date'),
          facility: formData.get('facility') || '',
          overallRating: parseInt(formData.get('overallRating')),
          navigationEase: parseInt(formData.get('navigationEase')),
          dataEntryEase: parseInt(formData.get('dataEntryEase')),
          usabilityComments: formData.get('usabilityComments') || '',
          usefulFeatures: formData.getAll('usefulFeatures'),
          featureSuggestions: formData.get('featureSuggestions'),
          technicalIssues: formData.get('technicalIssues'),
          issuesDetails: formData.get('issuesDetails') || '',
          performance: parseInt(formData.get('performance')),
          clinicalUsefulness: parseInt(formData.get('clinicalUsefulness')),
          clinicalComments: formData.get('clinicalComments') || '',
          adequateTraining: formData.get('adequateTraining'),
          trainingComments: formData.get('trainingComments') || '',
          additionalComments: formData.get('additionalComments'),
          wouldRecommend: formData.get('wouldRecommend'),
          submittedBy: user.uid,
          submittedByEmail: user.email || '',
          timestamp: firebase.firestore.FieldValue.serverTimestamp(),
          createdAt: new Date().toISOString()
        };

        // Save to Firestore
        await firebase.firestore().collection('feedback').add(feedbackData);

        // Show success message
        showAlert('success', 'Thank you for your feedback! Your response has been submitted successfully.');
        
        // Reset form
        this.reset();
        document.getElementById('date').valueAsDate = new Date();
        document.getElementById('issuesDetailsGroup').style.display = 'none';
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });

      } catch (error) {
        console.error('Error submitting feedback:', error);
        showAlert('danger', `Error submitting feedback: ${error.message}`);
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
      }
    });

    // Show alert function
    function showAlert(type, message) {
      const alertContainer = document.getElementById('alertContainer');
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
      alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      `;
      alertContainer.innerHTML = '';
      alertContainer.appendChild(alertDiv);

      // Auto-dismiss after 5 seconds
      setTimeout(() => {
        alertDiv.classList.remove('show');
        setTimeout(() => alertDiv.remove(), 150);
      }, 5000);
    }

    // Check authentication on load
    firebase.auth().onAuthStateChanged(function(user) {
      if (!user) {
        window.location.href = 'login.html';
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

